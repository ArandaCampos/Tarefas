CREATE TABLE project(
    id_project SERIAL PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    progress VARCHAR(11)
        CHECK(progress IN ('initial', 'finished', 'in progress', 'canceled'))
            DEFAULT 'initial',
    description VARCHAR(255)
    );

CREATE TABLE tasks(
    id_tasks SERIAL PRIMARY KEY,
    id_project SERIAL,
    name VARCHAR(50) NOT NULL,
    deadline TIMESTAMP,
    description VARCHAR(255),
    priority VARCHAR(6)
        CHECK(priority in ('low', 'medium', 'high')) DEFAULT 'low',
    state VARCHAR(8)
        CHECK(state IN ('to do', 'doing', 'done', 'late', 'canceled'))
            DEFAULT 'to do',
    CONSTRAINT fk_project
        FOREIGN KEY(id_project)
        REFERENCES project(id_project)
            ON DELETE CASCADE
    );

# Quantidade de tasks relacionada ao project 'x'
SELECT COUNT(id_project) FROM tasks WHERE id_project = 'x';

# Tasks a fazer do project 'x'
SELECT name FROM tasks WHERE id_project = 'x' and state = 'to do';
 